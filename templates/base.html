<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mon Projet{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}">
</head>
<body>
    <!-- Navbar principale toujours visible -->
    <nav class="top-navbar">
        <div class="nav-container">
            <a href="{% if user.is_authenticated %}{% url 'pages:accueil' %}{% else %}/{% endif %}" class="logo">
                <div class="logo-icon">MP</div>
            </a>
            
            <div class="nav-right">
                <a href="/admin/" class="admin-link">
                    <span>âš™ï¸</span>
                    Admin
                </a>
                <button class="theme-toggle" onclick="toggleTheme()" title="Changer le thÃ¨me">
                    <span id="theme-icon">ğŸŒ™</span>
                </button>
            </div>
        </div>
    </nav>

    {% if user.is_authenticated %}
    <div class="container">
        <nav class="secondary-navbar">
            <a href="{% url 'pages:accueil' %}">ğŸ  Accueil</a>
            <a href="{% url 'pages:pageA' %}">ğŸ“„ Page A</a>
            <a href="{% url 'pages:pageB' %}">ğŸ“„ Page B</a>
            <a href="{% url 'pages:pageC' %}">ğŸ“„ Page C</a>
            <a href="{% url 'pages:deconnexion' %}" class="logout-btn">ğŸšª DÃ©connexion</a>
        </nav>
        
        <div class="content">
            <h1>{% block header %}{% endblock %}</h1>
            <p>Bienvenue, <strong>{{ user.username }}</strong> ! ğŸ‘‹</p>
            {% block content %}{% endblock %}
        </div>
    </div>
    {% else %}
        {% block login_content %}{% endblock %}
    {% endif %}

    <script>
		// Gestion du thÃ¨me
		function toggleTheme() {
			const html = document.documentElement;
			const themeIcon = document.getElementById('theme-icon');
			const currentTheme = html.getAttribute('data-theme');

			if (currentTheme === 'dark') {
				html.setAttribute('data-theme', 'light');
				themeIcon.textContent = 'ğŸŒ™';
				localStorage.setItem('theme', 'light');
			} else {
				html.setAttribute('data-theme', 'dark');
				themeIcon.textContent = 'â˜€ï¸';
				localStorage.setItem('theme', 'dark');
			}
		}

		// Charger le thÃ¨me sauvegardÃ© au dÃ©marrage
		document.addEventListener('DOMContentLoaded', function () {
			const savedTheme = localStorage.getItem('theme') || 'light';
			const themeIcon = document.getElementById('theme-icon');

			document.documentElement.setAttribute('data-theme', savedTheme);
			themeIcon.textContent = savedTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
		});
	</script>
	</body>
	
	</html>
